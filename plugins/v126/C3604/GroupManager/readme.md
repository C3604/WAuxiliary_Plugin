# 微信群管理插件

## 功能描述

这是一个微信群管理插件，提供群组消息过滤和踢人管理功能。支持限定特定群组响应，并提供便捷的踢人管理命令。

## 主要功能

### 1. 群组过滤
- 限定插件仅响应特定群组的消息
- 支持配置多个允许管理的群组
- 未配置时默认允许所有群组

### 2. 踢人管理
- 支持通过@用户+#b+原因的方式踢出群成员
- 自动发送踢人通知消息
- 提供详细的日志记录
- 防止误操作（不能踢出自己或命令发送者）

## 配置说明

### 程序配置（在main.java开头修改）

```java
// ==================== 配置部分 ====================
// 允许管理的群组列表（多个群组用逗号分隔，留空表示允许所有群组）
String allowedGroupsConfig = "group1@chatroom,group2@chatroom";

// 调试模式（true=开启，false=关闭）
boolean debugMode = false;
```

### 配置参数说明

#### allowedGroupsConfig
- **类型**：字符串
- **格式**：群组wxid，多个群组用逗号分隔
- **示例**：`"group1@chatroom,group2@chatroom"`
- **默认**：空字符串（允许所有群组）

#### debugMode
- **类型**：布尔值
- **选项**：true（开启）/ false（关闭）
- **默认**：false
- **作用**：开启后显示详细的调试日志

## 使用方法

### 踢人命令格式
```
@用户名 #b [踢人原因]
```

### 示例
```
@张三 #b 打广告
@李四 #b 发布违规内容
@王五 #b 恶意刷屏
@赵六 #b
```

**注意**：踢人原因可以为空，如果为空则使用默认原因"违反群规"。

## 触发条件

1. **群组过滤**：消息必须来自配置的允许群组（如果已配置）
2. **踢人命令**：
   - 消息内容必须包含@符号和#b关键字
   - 消息格式必须符合：@用户名 #b [原因]
   - 被@的用户必须是群成员
   - 不能踢出自己或命令发送者
   - 踢人原因可以为空，空时使用默认原因"违反群规"

## 预期结果

### 成功踢人
1. 成功踢出指定用户
2. 在群内发送消息："XXX被踢出群组，原因：XXXX"
3. 记录操作日志

### 错误处理
- 命令格式错误时提示正确格式
- 无法识别用户时提示检查@的用户
- 踢人失败时显示具体错误信息
- 防止误操作的安全检查

## 权限要求

1. **群管理权限**：确保机器人有群管理权限才能踢人
2. **群成员身份**：机器人必须是群成员
3. **管理员权限**：建议在管理员群组中使用

## 安全特性

1. **防误操作**：
   - 不能踢出自己
   - 不能踢出发送踢人命令的用户
   - 踢人原因可以为空，空时使用默认原因

2. **权限检查**：
   - 验证用户是否在群中
   - 检查群组是否在允许列表中

3. **错误处理**：
   - 完善的异常捕获
   - 详细的错误提示
   - 操作日志记录

## 注意事项

1. **权限要求**：确保机器人有群管理权限
2. **用户验证**：被踢用户必须是群成员
3. **操作不可逆**：踢人操作不可逆，请谨慎使用
4. **测试建议**：建议先在测试群组中验证功能
5. **API限制**：某些用户查找功能可能受微信API限制

## 故障排除

### 常见问题

1. **无法踢人**
   - 检查机器人是否有群管理权限
   - 确认被踢用户是群成员
   - 查看日志中的错误信息

2. **无法识别@的用户**
   - 确保@的是群成员
   - 检查用户名格式是否正确
   - 尝试使用完整的用户wxid

3. **群组过滤不生效**
   - 检查群组是否在允许列表中
   - 修改配置后需要重启插件

### 日志查看
开启调试模式后，可以在日志中查看详细的操作信息：
```
[GroupManager INFO] 准备踢出用户: 张三 (wxid123) 原因: 打广告
[GroupManager ERROR] 踢人操作失败: 权限不足
```

## 版本信息

- **版本**：20250117
- **作者**：C3604
- **适用**：WAuxiliary v1.2.6
- **更新**：简化版本，移除帮助信息，配置前置
